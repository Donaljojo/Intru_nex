{% extends 'base.html.twig' %}

{% block title %}Scan Progress{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1>Scan Progress for {{ scanJob.asset.name }}</h1>

        <div class="card">
            <div class="card-header">
                Scan Job #{{ scanJob.id }}
            </div>
            <div class="card-body">
                <p><strong>Asset:</strong> <a href="{{ path('asset_detail', {id: scanJob.asset.id}) }}">{{ scanJob.asset.name }}</a></p>
                <p><strong>Scanner:</strong> {{ scanJob.scanner|default('N/A')|capitalize }}</p>
                <p><strong>Status:</strong> <span class="badge bg-info text-dark">{{ scanJob.status|capitalize }}</span></p>
                <p><strong>Started:</strong> {{ scanJob.startedAt|date('Y-m-d H:i:s') }}</p>
                <p><strong>Finished:</strong> {{ scanJob.finishedAt ? scanJob.finishedAt|date('Y-m-d H:i:s') : 'Not yet finished' }}</p>

                {% if scanJob.status != 'completed' %}
                    <p>This page will auto-refresh to show progress.</p>
                    <meta http-equiv="refresh" content="5">
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}